# ==========================================
# DE-MYSTIFY API - CONFIGURACIÓN
# ==========================================
# Copia este archivo como .env y ajusta los valores

# ==========================================
# REQUERIDO - API Keys
# ==========================================
GEMINI_API_KEY=tu-api-key-de-google-gemini-aqui

# ==========================================
# SEGURIDAD - JWT Token
# ==========================================
# SECRET_KEY para firmar tokens JWT (CAMBIAR EN PRODUCCIÓN)
# Genera una key segura con: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production-use-openssl-rand

# ENCRYPTION_KEY para encriptar datos sensibles en BD (emails, nombres, textos)
# Genera con: python encryption.py generate-key
ENCRYPTION_KEY=your-encryption-key-use-python-encryption-py-generate-key

# ==========================================
# OAUTH - GOOGLE LOGIN (Opcional)
# ==========================================
# Para obtener credenciales OAuth:
# 1. Ve a https://console.cloud.google.com/
# 2. Crea un proyecto nuevo o selecciona uno existente
# 3. Habilita "Google+ API" o "Google Identity Services"
# 4. Ve a "Credenciales" → "Crear credenciales" → "ID de cliente de OAuth 2.0"
# 5. Tipo de aplicación: "Aplicación web"
# 6. URIs de redireccionamiento autorizados: http://localhost:3000/auth/callback

GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback

# ==========================================
# EMAIL VERIFICATION (Opcional)
# ==========================================
# Configuración SMTP para verificación de email
# Gmail: smtp.gmail.com:587 (requiere App Password - https://support.google.com/accounts/answer/185833)
# Outlook: smtp-mail.outlook.com:587
# Otros: Consulta documentación de tu proveedor

SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=tu-email@gmail.com
SMTP_PASSWORD=tu-app-password-aqui
SMTP_FROM_EMAIL=tu-email@gmail.com
SMTP_FROM_NAME=Demystify App

# Requerir verificación de email antes de usar la cuenta (true/false)
EMAIL_VERIFICATION_REQUIRED=false

# URL del frontend (para enlaces de verificación)
FRONTEND_URL=http://localhost:3000

# ==========================================
# BASE DE DATOS
# ==========================================
# SQLite (desarrollo - por defecto):
DATABASE_URL=sqlite:///./demystify.db

# PostgreSQL (producción - recomendado):
# DATABASE_URL=postgresql://user:password@localhost/demystify

# MySQL:
# DATABASE_URL=mysql://user:password@localhost/demystify

# ==========================================
# App Info
# ==========================================
APP_NAME=De-Mystify API
APP_VERSION=2.0.0
APP_DESCRIPTION=API REST para convertir instrucciones ambiguas en tareas concretas usando IA

# ==========================================
# Server Configuration
# ==========================================
HOST=0.0.0.0
PORT=8001
RELOAD=true  # Hot reload en desarrollo (cambiar a false en producción)

# ==========================================
# CORS - Cross-Origin Resource Sharing
# ==========================================
# Desarrollo: permite localhost
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Producción: especificar dominio exacto
# CORS_ORIGINS=https://mi-app.com,https://www.mi-app.com

CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST
CORS_ALLOW_HEADERS=*

# ==========================================
# Logging
# ==========================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=api.log

# ==========================================
# Security - API Keys (opcional)
# ==========================================
# Activar autenticación con API keys
REQUIRE_API_KEY=false  # Cambiar a true para proteger endpoints

# Lista de API keys válidas (separadas por comas)
# Generar con: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=

# Ejemplo con keys:
# API_KEYS=key_abc123def456,key_xyz789ghi012,key_production_001

# ==========================================
# Rate Limiting
# ==========================================
ENABLE_RATE_LIMIT=true
RATE_LIMIT_REQUESTS=60  # Máximo de requests
RATE_LIMIT_WINDOW=60    # Ventana de tiempo en segundos
RATE_LIMIT_BY_IP=true   # Limitar por IP

# Ejemplos:
# Estricto: RATE_LIMIT_REQUESTS=30, RATE_LIMIT_WINDOW=60 (30 req/min)
# Normal: RATE_LIMIT_REQUESTS=60, RATE_LIMIT_WINDOW=60 (60 req/min)
# Relajado: RATE_LIMIT_REQUESTS=120, RATE_LIMIT_WINDOW=60 (120 req/min)

# ==========================================
# Cache Configuration
# ==========================================
ENABLE_CACHE=true
CACHE_TTL=300  # Time to live en segundos (300 = 5 minutos)

# ==========================================
# Timeouts
# ==========================================
GEMINI_TIMEOUT=30    # Timeout para llamadas a Gemini API (segundos)
REQUEST_TIMEOUT=60   # Timeout general de requests (segundos)

# ==========================================
# Security Headers
# ==========================================
ENABLE_SECURITY_HEADERS=true  # Activar headers de seguridad (X-Frame-Options, CSP, etc.)

# ==========================================
# EJEMPLOS DE CONFIGURACIÓN
# ==========================================

# --- DESARROLLO LOCAL ---
# GEMINI_API_KEY=tu-key
# ENABLE_RATE_LIMIT=false
# REQUIRE_API_KEY=false
# CORS_ORIGINS=*
# LOG_LEVEL=DEBUG

# --- STAGING ---
# GEMINI_API_KEY=staging-key
# ENABLE_RATE_LIMIT=true
# RATE_LIMIT_REQUESTS=100
# REQUIRE_API_KEY=true
# API_KEYS=staging_key_001
# CORS_ORIGINS=https://staging.mi-app.com
# LOG_LEVEL=INFO

# --- PRODUCCIÓN ---
# GEMINI_API_KEY=prod-key-secret
# ENABLE_RATE_LIMIT=true
# RATE_LIMIT_REQUESTS=60
# REQUIRE_API_KEY=true
# API_KEYS=prod_key_001,prod_key_002
# CORS_ORIGINS=https://mi-app.com
# LOG_LEVEL=WARNING
# GEMINI_TIMEOUT=20
